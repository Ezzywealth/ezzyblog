import Header from '@/components/Header/Header';
import '../../styles/globals.css';
import Sidebar from '../../components/Sidebar/Sidebar';
import { groq } from 'next-sanity';
import { client } from '@/lib/sanity.client';
import FooterSection from '@/components/Footer/Footer';

export const metadata = {
	title: 'Ezzy Blog',
	description: 'Generated by Next.js',
};
export const revalidate = 60;
const query = groq`
*[_type=='post']{
	...,
	author->,
	categories[]->,
} | order(_createdAt desc)
`;
export default async function RootLayout({
	children,
}: {
	children: React.ReactNode;
}) {
	// fetch data from studio
	const posts = await client.fetch(query);
	return (
		<html lang='en'>
			<body className='mx-auto'>
				<Header />
				<main className='grid lg:grid-cols-9 w-full px-4  md:py-16 pb-20 mt-[200px]'>
					<section className='lg:col-span-6  lg:pl-10'>
						<section>{children}</section>
					</section>
					<section className='lg:col-span-3  lg:pl-10 '>
						<Sidebar posts={posts} />
					</section>
				</main>
				<FooterSection />
			</body>
		</html>
	);
}
